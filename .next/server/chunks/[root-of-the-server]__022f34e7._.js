module.exports = {

"[project]/.next-internal/server/app/api/factura/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/string_decoder [external] (string_decoder, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/timers [external] (timers, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("timers", () => require("timers"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[externals]/assert [external] (assert, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}}),
"[externals]/buffer [external] (buffer, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}}),
"[project]/src/lib/afip.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "AFIPService": (()=>AFIPService),
    "afipService": (()=>afipService)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xml2js$2f$lib$2f$xml2js$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/xml2js/lib/xml2js.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$qrcode$2f$lib$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/qrcode/lib/index.js [app-route] (ecmascript)");
;
;
class AFIPService {
    config;
    constructor(){
        this.config = {
            cuit: process.env.AFIP_CUIT || '',
            puntoVenta: parseInt(process.env.AFIP_PUNTO_VENTA || '1'),
            certificatePath: process.env.AFIP_CERT_PATH || '',
            certificatePassword: process.env.AFIP_CERT_PASSWORD || '',
            endpoint: process.env.AFIP_ENDPOINT || 'https://wswhomo.afip.gov.ar/wsfev1/service.asmx',
            ambiente: ("TURBOPACK compile-time falsy", 0) ? ("TURBOPACK unreachable", undefined) : 'testing'
        };
    }
    getTipoComprobante(tipo) {
        const tipos = {
            'factura': 1,
            'nota_credito': 2,
            'nota_debito': 3 // Nota de DÃ©bito A
        };
        return tipos[tipo] || 1;
    }
    async generateXMLRequest(invoiceData) {
        const tipoComprobante = this.getTipoComprobante(invoiceData.tipoComprobante);
        const xmlData = {
            'soap:Envelope': {
                '$': {
                    'xmlns:soap': 'http://www.w3.org/2003/05/soap-envelope',
                    'xmlns:ar': 'http://ar.gov.afip.dif.FEV1/'
                },
                'soap:Header': {},
                'soap:Body': {
                    'ar:FECAESolicitar': {
                        'ar:Auth': {
                            'ar:Token': 'TOKEN_PLACEHOLDER',
                            'ar:Sign': 'SIGN_PLACEHOLDER',
                            'ar:Cuit': this.config.cuit
                        },
                        'ar:FeCAEReq': {
                            'ar:FeCabReq': {
                                'ar:CantReg': 1,
                                'ar:PtoVta': this.config.puntoVenta,
                                'ar:CbteTipo': tipoComprobante
                            },
                            'ar:FeDetReq': {
                                'ar:FECAEDetRequest': {
                                    'ar:Concepto': 1,
                                    'ar:DocTipo': 80,
                                    'ar:DocNro': invoiceData.cliente.numeroDocumento,
                                    'ar:CbteDesde': invoiceData.numeroComprobante,
                                    'ar:CbteHasta': invoiceData.numeroComprobante,
                                    'ar:CbteFch': invoiceData.fecha.replace(/-/g, ''),
                                    'ar:ImpTotal': invoiceData.total.toFixed(2),
                                    'ar:ImpTotConc': 0,
                                    'ar:ImpNeto': invoiceData.subtotal.toFixed(2),
                                    'ar:ImpOpEx': 0,
                                    'ar:ImpIVA': invoiceData.totalIVA.toFixed(2),
                                    'ar:ImpTrib': 0,
                                    'ar:MonId': 'PES',
                                    'ar:MonCotiz': 1,
                                    'ar:Iva': {
                                        'ar:AlicIva': invoiceData.items.map((item)=>({
                                                'ar:Id': 5,
                                                'ar:BaseImp': (item.cantidad * item.precioUnitario).toFixed(2),
                                                'ar:Importe': item.importeIVA.toFixed(2)
                                            }))
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };
        const builder = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xml2js$2f$lib$2f$xml2js$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Builder"]({
            xmldec: {
                version: '1.0',
                encoding: 'UTF-8'
            }
        });
        return builder.buildObject(xmlData);
    }
    async signXML(xml) {
        // En un entorno real, aquÃ­ se firmarÃ­a el XML con el certificado digital
        // Por ahora, simulamos la firma
        return xml.replace('TOKEN_PLACEHOLDER', 'SIMULATED_TOKEN').replace('SIGN_PLACEHOLDER', 'SIMULATED_SIGNATURE');
    }
    async generateQRCode(invoiceData, cae) {
        const qrData = {
            ver: 1,
            fecha: invoiceData.fecha,
            cuit: this.config.cuit,
            ptoVta: this.config.puntoVenta,
            tipoCmp: this.getTipoComprobante(invoiceData.tipoComprobante),
            nroCmp: invoiceData.numeroComprobante,
            importe: invoiceData.total,
            moneda: 'PES',
            ctz: 1,
            tipoDocRec: 80,
            nroDocRec: invoiceData.cliente.numeroDocumento,
            tipoCodAut: 'E',
            codAut: cae
        };
        const qrString = JSON.stringify(qrData);
        return await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$qrcode$2f$lib$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].toDataURL(qrString);
    }
    async sendInvoice(invoiceData) {
        try {
            // Validar datos requeridos
            if (!invoiceData.cliente.numeroDocumento || !invoiceData.items.length) {
                return {
                    success: false,
                    error: 'Datos incompletos: se requiere CUIT del cliente e items'
                };
            }
            // Generar XML de solicitud
            const xmlRequest = await this.generateXMLRequest(invoiceData);
            // Firmar XML
            const signedXML = await this.signXML(xmlRequest);
            // En un entorno real, aquÃ­ se enviarÃ­a a AFIP
            // Por ahora, simulamos una respuesta exitosa
            const simulatedCAE = this.generateSimulatedCAE();
            const fechaVencimiento = this.getFechaVencimientoCAE();
            // Generar cÃ³digo QR
            const qrCode = await this.generateQRCode(invoiceData, simulatedCAE);
            return {
                success: true,
                cae: simulatedCAE,
                fechaVencimientoCae: fechaVencimiento,
                numeroComprobante: invoiceData.numeroComprobante,
                qrCode: qrCode,
                observaciones: [
                    'Comprobante autorizado correctamente'
                ]
            };
        } catch (error) {
            console.error('Error en AFIP Service:', error);
            return {
                success: false,
                error: `Error al procesar la factura: ${error instanceof Error ? error.message : 'Error desconocido'}`
            };
        }
    }
    generateSimulatedCAE() {
        // Generar CAE simulado de 14 dÃ­gitos
        return Math.floor(Math.random() * 99999999999999).toString().padStart(14, '0');
    }
    getFechaVencimientoCAE() {
        // CAE vence 10 dÃ­as despuÃ©s de la emisiÃ³n
        const fecha = new Date();
        fecha.setDate(fecha.getDate() + 10);
        return fecha.toISOString().split('T')[0];
    }
    async getNextInvoiceNumber(tipoComprobante) {
        // En un entorno real, esto consultarÃ­a a AFIP el Ãºltimo nÃºmero usado
        // Por ahora, generamos un nÃºmero simulado
        return Math.floor(Math.random() * 1000) + 1;
    }
}
const afipService = new AFIPService();
}}),
"[project]/src/app/api/factura/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "GET": (()=>GET),
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$afip$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/afip.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__ = __turbopack_context__.i("[project]/node_modules/zod/v3/external.js [app-route] (ecmascript) <export * as z>");
;
;
;
// Esquema de validaciÃ³n con Zod
const InvoiceItemSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    id: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string(),
    descripcion: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().min(1, 'La descripciÃ³n es requerida'),
    cantidad: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive('La cantidad debe ser mayor a 0'),
    precioUnitario: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive('El precio unitario debe ser mayor a 0'),
    alicuotaIVA: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().min(0).max(100),
    importeIVA: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().min(0),
    importeTotal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive()
});
const ClienteSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    tipoDocumento: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().min(1, 'El tipo de documento es requerido'),
    numeroDocumento: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().min(1, 'El nÃºmero de documento es requerido'),
    razonSocial: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().min(1, 'La razÃ³n social es requerida'),
    domicilio: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().min(1, 'El domicilio es requerido'),
    condicionIVA: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().min(1, 'La condiciÃ³n de IVA es requerida')
});
const InvoiceSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].object({
    tipoComprobante: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].enum([
        'factura',
        'nota_credito',
        'nota_debito'
    ]),
    puntoVenta: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive(),
    numeroComprobante: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive(),
    fecha: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().regex(/^\d{4}-\d{2}-\d{2}$/, 'Formato de fecha invÃ¡lido (YYYY-MM-DD)'),
    cliente: ClienteSchema,
    items: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].array(InvoiceItemSchema).min(1, 'Se requiere al menos un item'),
    subtotal: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive(),
    totalIVA: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().min(0),
    total: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].number().positive(),
    observaciones: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$v3$2f$external$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__z$3e$__["z"].string().optional()
});
async function POST(request) {
    try {
        const body = await request.json();
        // Validar datos de entrada
        const validationResult = InvoiceSchema.safeParse(body);
        if (!validationResult.success) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'Datos de factura invÃ¡lidos',
                details: validationResult.error.errors.map((err)=>({
                        field: err.path.join('.'),
                        message: err.message
                    }))
            }, {
                status: 400
            });
        }
        const invoiceData = validationResult.data;
        // Validar que los totales sean correctos
        const calculatedSubtotal = invoiceData.items.reduce((sum, item)=>sum + item.cantidad * item.precioUnitario, 0);
        const calculatedIVA = invoiceData.items.reduce((sum, item)=>sum + item.importeIVA, 0);
        if (Math.abs(calculatedSubtotal - invoiceData.subtotal) > 0.01) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'El subtotal calculado no coincide con el enviado'
            }, {
                status: 400
            });
        }
        if (Math.abs(calculatedIVA - invoiceData.totalIVA) > 0.01) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: 'El total de IVA calculado no coincide con el enviado'
            }, {
                status: 400
            });
        }
        // Enviar factura a AFIP
        const afipResponse = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$afip$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["afipService"].sendInvoice(invoiceData);
        if (!afipResponse.success) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                success: false,
                error: afipResponse.error || 'Error al procesar la factura en AFIP'
            }, {
                status: 500
            });
        }
        // Respuesta exitosa
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            data: {
                cae: afipResponse.cae,
                fechaVencimientoCae: afipResponse.fechaVencimientoCae,
                numeroComprobante: afipResponse.numeroComprobante,
                qrCode: afipResponse.qrCode,
                observaciones: afipResponse.observaciones
            }
        });
    } catch (error) {
        console.error('Error en API de factura:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: 'Error interno del servidor'
        }, {
            status: 500
        });
    }
}
async function GET(request) {
    try {
        const { searchParams } = new URL(request.url);
        const tipoComprobante = searchParams.get('tipo') || 'factura';
        // Obtener prÃ³ximo nÃºmero de comprobante
        const nextNumber = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$afip$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["afipService"].getNextInvoiceNumber(tipoComprobante);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            data: {
                proximoNumero: nextNumber,
                puntoVenta: parseInt(process.env.AFIP_PUNTO_VENTA || '1')
            }
        });
    } catch (error) {
        console.error('Error al obtener prÃ³ximo nÃºmero:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: false,
            error: 'Error al obtener informaciÃ³n de numeraciÃ³n'
        }, {
            status: 500
        });
    }
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__022f34e7._.js.map